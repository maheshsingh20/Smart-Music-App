<!DOCTYPE html>
<html>
<head>
    <title>Test Jamendo Audio</title>
</head>
<body>
    <h1>Test Jamendo Audio Playback</h1>
    <button id="testBtn">Test Audio</button>
    <div id="status"></div>
    <audio id="audio" controls crossorigin="anonymous"></audio>

    <script>
        document.getElementById('testBtn').addEventListener('click', async () => {
            const status = document.getElementById('status');
            const audio = document.getElementById('audio');
            
            try {
                status.innerHTML = 'Fetching song...';
                const response = await fetch('http://localhost:5000/api/search?q=rock&limit=1');
                const songs = await response.json();
                
                if (songs.length > 0) {
                    const song = songs[0];
                    status.innerHTML = `Playing: ${song.title} by ${song.artistName}<br>URL: ${song.audioUrl}`;
                    
                    audio.src = song.audioUrl;
                    audio.load();
                    
                    audio.play().then(() => {
                        status.innerHTML += '<br>✅ Playing successfully!';
                    }).catch(err => {
                        status.innerHTML += `<br>❌ Play error: ${err.message}`;
                    });
                } else {
                    status.innerHTML = 'No songs found';
                }
            } catch (error) {
                status.innerHTML = `Error: ${error.message}`;
            }
        });
    </script>
</body>
</html>
